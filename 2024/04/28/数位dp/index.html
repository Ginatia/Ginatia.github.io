<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>数位dp | Ginatia</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="233. 数字 1 的个数给定一个整数 n，计算所有小于等于 n 的非负整数中数字 1 出现的个数。12345678910111213class Solution:    def countDigitOne(self, n: int) -&gt; int:        s&#x3D;str(n)        @cache        def f(i:int,cnt:int,is_limit:bool)">
<meta property="og:type" content="article">
<meta property="og:title" content="数位dp">
<meta property="og:url" content="http://example.com/2024/04/28/%E6%95%B0%E4%BD%8Ddp/index.html">
<meta property="og:site_name" content="Ginatia">
<meta property="og:description" content="233. 数字 1 的个数给定一个整数 n，计算所有小于等于 n 的非负整数中数字 1 出现的个数。12345678910111213class Solution:    def countDigitOne(self, n: int) -&gt; int:        s&#x3D;str(n)        @cache        def f(i:int,cnt:int,is_limit:bool)">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-04-27T16:00:00.000Z">
<meta property="article:modified_time" content="2024-04-28T15:15:10.659Z">
<meta property="article:author" content="ginatia">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Ginatia" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css" integrity="sha256-TThEtR+XalhWKkfF383YLOrI50NGNeIqrzS+q08afrY=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Ginatia</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS 订阅"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="搜索"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-数位dp" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/04/28/%E6%95%B0%E4%BD%8Ddp/" class="article-date">
  <time class="dt-published" datetime="2024-04-27T16:00:00.000Z" itemprop="datePublished">po0t_tit2024/4/286</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      数位dp
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h5 id="233-数字-1-的个数"><a href="#233-数字-1-的个数" class="headerlink" title="233. 数字 1 的个数"></a><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/number-of-digit-one/">233. 数字 1 的个数</a></h5><h6 id="给定一个整数-n，计算所有小于等于-n-的非负整数中数字-1-出现的个数。"><a href="#给定一个整数-n，计算所有小于等于-n-的非负整数中数字-1-出现的个数。" class="headerlink" title="给定一个整数 n，计算所有小于等于 n 的非负整数中数字 1 出现的个数。"></a>给定一个整数 <code>n</code>，计算所有小于等于 <code>n</code> 的非负整数中数字 <code>1</code> 出现的个数。</h6><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">countDigitOne</span>(<span class="params">self, n: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        s=<span class="built_in">str</span>(n)</span><br><span class="line"><span class="meta">        @cache</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">i:<span class="built_in">int</span>,cnt:<span class="built_in">int</span>,is_limit:<span class="built_in">bool</span></span>)-&gt;<span class="built_in">int</span>:</span><br><span class="line">            <span class="keyword">if</span> i==<span class="built_in">len</span>(s):</span><br><span class="line">                <span class="keyword">return</span> cnt</span><br><span class="line">            ans=<span class="number">0</span></span><br><span class="line">            up=<span class="built_in">int</span>(s[i]) <span class="keyword">if</span> is_limit <span class="keyword">else</span> <span class="number">9</span></span><br><span class="line">            <span class="keyword">for</span> d <span class="keyword">in</span> <span class="built_in">range</span>(up+<span class="number">1</span>):</span><br><span class="line">                ans+=f(i+<span class="number">1</span>,cnt+(d==<span class="number">1</span>),is_limit <span class="keyword">and</span> d==up)</span><br><span class="line">            <span class="keyword">return</span> ans</span><br><span class="line">        <span class="keyword">return</span> f(<span class="number">0</span>,<span class="number">0</span>,<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<h5 id="2376-统计特殊整数"><a href="#2376-统计特殊整数" class="headerlink" title="2376. 统计特殊整数"></a><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/count-special-integers/">2376. 统计特殊整数</a></h5><p>如果一个正整数每一个数位都是 <strong>互不相同</strong> 的，我们称它是 <strong>特殊整数</strong> 。</p>
<p>给你一个 <strong>正</strong> 整数 <code>n</code> ，请你返回区间 <code>[1, n]</code> 之间特殊整数的数目。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">countSpecialNumbers</span>(<span class="params">self, n: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        s = <span class="built_in">str</span>(n)</span><br><span class="line"></span><br><span class="line"><span class="meta">        @cache</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">i: <span class="built_in">int</span>, mask: <span class="built_in">int</span>, is_limit: <span class="built_in">bool</span>, is_num: <span class="built_in">bool</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">            <span class="keyword">if</span> i == <span class="built_in">len</span>(s):</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">int</span>(is_num)</span><br><span class="line">            ans = <span class="number">0</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> is_num:</span><br><span class="line">                ans = f(i+<span class="number">1</span>, mask, <span class="literal">False</span>, <span class="literal">False</span>)</span><br><span class="line">            up = <span class="built_in">int</span>(s[i]) <span class="keyword">if</span> is_limit <span class="keyword">else</span> <span class="number">9</span></span><br><span class="line">            <span class="keyword">for</span> d <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>-<span class="built_in">int</span>(is_num), up+<span class="number">1</span>):</span><br><span class="line">                <span class="keyword">if</span> mask &amp; (<span class="number">1</span> &lt;&lt; d) == <span class="number">0</span>:</span><br><span class="line">                    ans += f(i+<span class="number">1</span>, mask | (<span class="number">1</span> &lt;&lt; d), is_limit <span class="keyword">and</span> d == up, <span class="literal">True</span>)</span><br><span class="line">            <span class="keyword">return</span> ans</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> f(<span class="number">0</span>, <span class="number">0</span>, <span class="literal">True</span>, <span class="literal">False</span>)</span><br></pre></td></tr></table></figure>
<h5 id="2719-统计整数数目"><a href="#2719-统计整数数目" class="headerlink" title="2719. 统计整数数目"></a><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/count-of-integers/">2719. 统计整数数目</a></h5><p>给你两个数字字符串 <code>num1</code> 和 <code>num2</code> ，以及两个整数 <code>max_sum</code> 和 <code>min_sum</code> 。如果一个整数 <code>x</code> 满足以下条件，我们称它是一个好整数：</p>
<ul>
<li><code>num1 &lt;= x &lt;= num2</code></li>
<li><code>min_sum &lt;= digit_sum(x) &lt;= max_sum</code>.</li>
</ul>
<p>请你返回好整数的数目。答案可能很大，请返回答案对 <code>10**9 + 7</code> 取余后的结果。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">count</span>(<span class="params">self, num1: <span class="built_in">str</span>, num2: <span class="built_in">str</span>, min_sum: <span class="built_in">int</span>, max_sum: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">calc</span>(<span class="params">n: <span class="built_in">str</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line"><span class="meta">            @cache</span></span><br><span class="line">            <span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">i: <span class="built_in">int</span>, s: <span class="built_in">int</span>, is_limit: <span class="built_in">bool</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">                <span class="keyword">if</span> s &gt; max_sum:</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">                <span class="keyword">if</span> i == <span class="built_in">len</span>(n):</span><br><span class="line">                    <span class="keyword">return</span> s &gt;= min_sum</span><br><span class="line">                ans = <span class="number">0</span></span><br><span class="line">                up = <span class="built_in">int</span>(n[i]) <span class="keyword">if</span> is_limit <span class="keyword">else</span> <span class="number">9</span></span><br><span class="line">                <span class="keyword">for</span> d <span class="keyword">in</span> <span class="built_in">range</span>(up+<span class="number">1</span>):</span><br><span class="line">                    ans += dfs(i+<span class="number">1</span>, s+d, is_limit <span class="keyword">and</span> d == up)</span><br><span class="line">                <span class="keyword">return</span> ans</span><br><span class="line">            <span class="keyword">return</span> dfs(<span class="number">0</span>, <span class="number">0</span>, <span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        is_good = min_sum &lt;= <span class="built_in">sum</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, num1)) &lt;= max_sum</span><br><span class="line">        ans = (calc(num2)-calc(num1)+is_good) % (<span class="number">10</span>**<span class="number">9</span>+<span class="number">7</span>)</span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>
<h5 id="788-旋转数字"><a href="#788-旋转数字" class="headerlink" title="788. 旋转数字"></a><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/rotated-digits/">788. 旋转数字</a></h5><p>我们称一个数 X 为好数, 如果它的每位数字逐个地被旋转 180 度后，我们仍可以得到一个有效的，且和 X 不同的数。要求每位数字都要被旋转。</p>
<p>现在我们有一个正整数 <code>N</code>, 计算从 <code>1</code> 到 <code>N</code> 中有多少个数 X 是好数？</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">rotatedDigits</span>(<span class="params">self, n: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        dif = (<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, -<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">        s = <span class="built_in">str</span>(n)</span><br><span class="line"></span><br><span class="line"><span class="meta">        @cache</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">i: <span class="built_in">int</span>, hasDif: <span class="built_in">bool</span>, is_limit: <span class="built_in">bool</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">            <span class="keyword">if</span> i == <span class="built_in">len</span>(s):</span><br><span class="line">                <span class="keyword">return</span> hasDif</span><br><span class="line">            ans = <span class="number">0</span></span><br><span class="line">            up = <span class="built_in">int</span>(s[i]) <span class="keyword">if</span> is_limit <span class="keyword">else</span> <span class="number">9</span></span><br><span class="line">            <span class="keyword">for</span> d <span class="keyword">in</span> <span class="built_in">range</span>(up+<span class="number">1</span>):</span><br><span class="line">                <span class="keyword">if</span> dif[d] != -<span class="number">1</span>:</span><br><span class="line">                    ans += dfs(i+<span class="number">1</span>, hasDif <span class="keyword">or</span> dif[d], is_limit <span class="keyword">and</span> d == up)</span><br><span class="line">            <span class="keyword">return</span> ans</span><br><span class="line">        <span class="keyword">return</span> dfs(<span class="number">0</span>, <span class="literal">False</span>, <span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<h5 id="902-最大为-N-的数字组合"><a href="#902-最大为-N-的数字组合" class="headerlink" title="902. 最大为 N 的数字组合"></a><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/numbers-at-most-n-given-digit-set/">902. 最大为 N 的数字组合</a></h5><h6 id=""><a href="#" class="headerlink" title=" "></a> </h6><p>给定一个按 <strong>非递减顺序</strong> 排列的数字数组 <code>digits</code> 。你可以用任意次数 <code>digits[i]</code> 来写的数字。例如，如果 <code>digits = [&#39;1&#39;,&#39;3&#39;,&#39;5&#39;]</code>，我们可以写数字，如 <code>&#39;13&#39;</code>, <code>&#39;551&#39;</code>, 和 <code>&#39;1351315&#39;</code>。</p>
<p>返回 _可以生成的小于或等于给定整数 <code>n</code> 的正整数的个数_ 。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">atMostNGivenDigitSet</span>(<span class="params">self, digits: <span class="type">List</span>[<span class="built_in">str</span>], n: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        s = <span class="built_in">str</span>(n)</span><br><span class="line"></span><br><span class="line"><span class="meta">        @cache</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">i: <span class="built_in">int</span>, is_limit: <span class="built_in">bool</span>, is_num: <span class="built_in">bool</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">            <span class="keyword">if</span> i == <span class="built_in">len</span>(s):</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">int</span>(is_num)</span><br><span class="line">            ans = <span class="number">0</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> is_num:</span><br><span class="line">                ans += dfs(i+<span class="number">1</span>, <span class="literal">False</span>, <span class="literal">False</span>)</span><br><span class="line">            up = s[i] <span class="keyword">if</span> is_limit <span class="keyword">else</span> <span class="string">&#x27;9&#x27;</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> d <span class="keyword">in</span> digits:</span><br><span class="line">                <span class="keyword">if</span> d &gt; up:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                ans += dfs(i+<span class="number">1</span>, is_limit <span class="keyword">and</span> d == up, <span class="literal">True</span>)</span><br><span class="line">            <span class="keyword">return</span> ans</span><br><span class="line">        <span class="keyword">return</span> dfs(<span class="number">0</span>, <span class="literal">True</span>, <span class="literal">False</span>)</span><br></pre></td></tr></table></figure>
<h5 id="面试题-17-06-2出现的次数"><a href="#面试题-17-06-2出现的次数" class="headerlink" title="面试题 17.06. 2出现的次数"></a><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/number-of-2s-in-range-lcci/">面试题 17.06. 2出现的次数</a></h5><p>编写一个方法，计算从 0 到 n (含 n) 中数字 2 出现的次数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">numberOf2sInRange</span>(<span class="params">self, n: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        s=<span class="built_in">str</span>(n)</span><br><span class="line"><span class="meta">        @cache</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">i:<span class="built_in">int</span>,cnt:<span class="built_in">int</span>,is_limit:<span class="built_in">bool</span></span>)-&gt;<span class="built_in">int</span>:</span><br><span class="line">            <span class="keyword">if</span> i==<span class="built_in">len</span>(s):</span><br><span class="line">                <span class="keyword">return</span> cnt</span><br><span class="line">            ans=<span class="number">0</span></span><br><span class="line">            up=<span class="built_in">int</span>(s[i]) <span class="keyword">if</span> is_limit <span class="keyword">else</span> <span class="number">9</span></span><br><span class="line">            <span class="keyword">for</span> d <span class="keyword">in</span> <span class="built_in">range</span>(up+<span class="number">1</span>):</span><br><span class="line">                ans+=dfs(i+<span class="number">1</span>,cnt+(d==<span class="number">2</span>),is_limit <span class="keyword">and</span> d==up)</span><br><span class="line">            <span class="keyword">return</span> ans</span><br><span class="line">        <span class="keyword">return</span> dfs(<span class="number">0</span>,<span class="number">0</span>,<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<h5 id="600-不含连续1的非负整数"><a href="#600-不含连续1的非负整数" class="headerlink" title="600. 不含连续1的非负整数"></a><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/non-negative-integers-without-consecutive-ones/">600. 不含连续1的非负整数</a></h5><p>给定一个正整数 <code>n</code> ，请你统计在 <code>[0, n]</code> 范围的非负整数中，有多少个整数的二进制表示中不存在 <strong>连续的 1</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">findIntegers</span>(<span class="params">self, n: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        s = <span class="built_in">bin</span>(n)[<span class="number">2</span>:]</span><br><span class="line"></span><br><span class="line"><span class="meta">        @cache</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">i: <span class="built_in">int</span>, one: <span class="built_in">bool</span>, is_limit: <span class="built_in">bool</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">            <span class="keyword">if</span> i == <span class="built_in">len</span>(s):</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">            ans = <span class="number">0</span></span><br><span class="line">            up = <span class="built_in">int</span>(s[i]) <span class="keyword">if</span> is_limit <span class="keyword">else</span> <span class="number">1</span></span><br><span class="line">            ans += dfs(i+<span class="number">1</span>, <span class="literal">False</span>, is_limit <span class="keyword">and</span> <span class="number">0</span> == up)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> one <span class="keyword">and</span> up == <span class="number">1</span>:</span><br><span class="line">                ans += dfs(i+<span class="number">1</span>, <span class="literal">True</span>, is_limit)</span><br><span class="line">            <span class="keyword">return</span> ans</span><br><span class="line">        <span class="keyword">return</span> dfs(<span class="number">0</span>, <span class="literal">False</span>, <span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<h5 id="E-数E-数"><a href="#E-数E-数" class="headerlink" title="E - 数E - 数"></a><a target="_blank" rel="noopener" href="https://atcoder.jp/contests/tdpc/tasks/tdpc_number#:~:text=%E9%A2%98%E8%A7%A3-,E%20%2D%20%E6%95%B0,-%E9%A2%98%E8%A7%A3">E - 数</a><a target="_blank" rel="noopener" href="https://atcoder.jp/contests/tdpc/tasks/tdpc_number#:~:text=%E9%A2%98%E8%A7%A3-,E%20%2D%20%E6%95%B0,-%E9%A2%98%E8%A7%A3">E - 数</a></h5><p>求出[1,n) 有多少个数 满足：数位之和是D的倍数，对答案取模<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup><mo>+</mo><mn>7</mn></mrow><annotation encoding="application/x-tex">10^{9}+7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">7</span></span></span></span></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> Z = Mint&lt;i64&gt;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> D;</span><br><span class="line">    std::string s;</span><br><span class="line">    std::cin &gt;&gt; D &gt;&gt; s;</span><br><span class="line">    <span class="type">int</span> n = s.<span class="built_in">size</span>();</span><br><span class="line">    <span class="type">const</span> i64 NIL = <span class="number">-1</span>;</span><br><span class="line">    <span class="function">std::vector <span class="title">dp</span><span class="params">(n, std::vector&lt;std::vector&lt;i64&gt;&gt;(D, std::vector&lt;i64&gt;(<span class="number">2</span>, NIL)))</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> i, <span class="type">int</span> r, <span class="type">bool</span> is_limit) -&gt; Z</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (i == n)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> r == <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (dp[i][r][is_limit] != NIL)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> dp[i][r][is_limit];</span><br><span class="line">        &#125;</span><br><span class="line">        Z ans = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> up = is_limit ? <span class="built_in">int</span>(s[i] - <span class="string">&#x27;0&#x27;</span>) : <span class="number">9</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> d = <span class="number">0</span>; d &lt;= up; d++)</span><br><span class="line">        &#123;</span><br><span class="line">            ans += <span class="built_in">self</span>(self, i + <span class="number">1</span>, (r + d) % D, is_limit <span class="keyword">and</span> d == up);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[i][r][is_limit] = ans.v;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> i : s)</span><br><span class="line">    &#123;</span><br><span class="line">        cnt += i - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">bool</span> n_ok = cnt % D == <span class="number">0</span>;</span><br><span class="line">    std::cout &lt;&lt; <span class="built_in">dfs</span>(dfs, <span class="number">0</span>, <span class="number">0</span>, <span class="literal">true</span>) - n_ok - <span class="number">1</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="D-禁止された数字"><a href="#D-禁止された数字" class="headerlink" title="D - 禁止された数字"></a><a target="_blank" rel="noopener" href="https://atcoder.jp/contests/abc007/tasks/abc007_4#:~:text=%F0%9F%A7%AA-,D%20%2D%20%E7%A6%81%E6%AD%A2%E3%81%95%E3%82%8C%E3%81%9F%E6%95%B0%E5%AD%97,-%E9%A2%98%E8%A7%A3">D - 禁止された数字</a></h5><p>给定范围[A,B],<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>A</mi><mo>&lt;</mo><mi>B</mi><mo>≤</mo><mn>1</mn><msup><mn>0</mn><mn>18</mn></msup></mrow><annotation encoding="application/x-tex">1\le A &lt; B\le 10^{18}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7224em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">18</span></span></span></span></span></span></span></span></span></span></span></span>,求出范围内有多少个数满足：数位中至少有一个4，或有一个6</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function">i64 <span class="title">calc</span><span class="params">(i64 num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::string s = std::<span class="built_in">to_string</span>(num);</span><br><span class="line">    <span class="type">int</span> n = s.<span class="built_in">size</span>();</span><br><span class="line">    <span class="type">const</span> i64 NIL = <span class="number">-1</span>;</span><br><span class="line">    <span class="function">std::vector <span class="title">dp</span><span class="params">(n, std::vector&lt;std::vector&lt;i64&gt;&gt;(<span class="number">2</span>, std::vector&lt;i64&gt;(<span class="number">2</span>, NIL)))</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> i, <span class="type">bool</span> forbid, <span class="type">bool</span> is_limit) -&gt; i64</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (i == n)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> forbid;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">auto</span> &amp;res = dp[i][forbid][is_limit];</span><br><span class="line">        <span class="keyword">if</span> (res != NIL)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;</span><br><span class="line">        i64 ans = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> up = is_limit ? s[i] - <span class="string">&#x27;0&#x27;</span> : <span class="number">9</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> d = <span class="number">0</span>; d &lt;= up; d++)</span><br><span class="line">        &#123;</span><br><span class="line">            ans += <span class="built_in">self</span>(self, i + <span class="number">1</span>, forbid <span class="keyword">or</span> d == <span class="number">4</span> <span class="keyword">or</span> d == <span class="number">9</span>, is_limit <span class="keyword">and</span> d == up);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res = ans;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dfs</span>(dfs, <span class="number">0</span>, <span class="literal">false</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    i64 a, b;</span><br><span class="line">    std::cin &gt;&gt; a &gt;&gt; b;</span><br><span class="line">    std::cout &lt;&lt; <span class="built_in">calc</span>(b) - <span class="built_in">calc</span>(a - <span class="number">1</span>) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="D-1"><a href="#D-1" class="headerlink" title="D - 1"></a><a target="_blank" rel="noopener" href="https://atcoder.jp/contests/abc029/tasks/abc029_d#:~:text=%F0%9F%A7%AA-,D%20%2D%201,-%E9%A2%98%E8%A7%A3">D - 1</a></h5><p>求出[1,n] 的整数，其数的10进制中的1的个数之和</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="function">i64 <span class="title">calc</span><span class="params">(i64 num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::string s = std::<span class="built_in">to_string</span>(num);</span><br><span class="line">    <span class="type">int</span> n = s.<span class="built_in">size</span>();</span><br><span class="line">    <span class="type">const</span> i64 NIL = <span class="number">-1</span>;</span><br><span class="line">    <span class="function">std::vector <span class="title">dp</span><span class="params">(n, std::vector&lt;std::vector&lt;i64&gt;&gt;(n, std::vector&lt;i64&gt;(<span class="number">2</span>, NIL)))</span></span>;</span><br><span class="line">    <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> i, i64 cnt, <span class="type">bool</span> is_limit) -&gt; i64</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (i == n)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> cnt;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">auto</span> &amp;ans = dp[i][cnt][is_limit];</span><br><span class="line">        <span class="keyword">if</span> (ans != NIL)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> ans;</span><br><span class="line">        &#125;</span><br><span class="line">        i64 res = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> up = is_limit ? s[i] - <span class="string">&#x27;0&#x27;</span> : <span class="number">9</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> d = <span class="number">0</span>; d &lt;= up; d++)</span><br><span class="line">        &#123;</span><br><span class="line">            res += <span class="built_in">self</span>(self, i + <span class="number">1</span>, cnt + (d == <span class="number">1</span>), is_limit <span class="keyword">and</span> d == up);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans = res;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dfs</span>(dfs, <span class="number">0</span>, <span class="number">0</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    std::cin &gt;&gt; n;</span><br><span class="line">    std::cout &lt;&lt; <span class="built_in">calc</span>(n) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="E-Digit-Sum-Divisible"><a href="#E-Digit-Sum-Divisible" class="headerlink" title="E - Digit Sum Divisible"></a><a target="_blank" rel="noopener" href="https://atcoder.jp/contests/abc336/tasks/abc336_e#:~:text=E%20%2D%20Digit%20Sum%20Divisible">E - Digit Sum Divisible</a></h5><p>求出[1,n]的符合条件的整数x,x满足x%(x的数位和)==0,</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function">i64 <span class="title">calc</span><span class="params">(i64 num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::string s = std::<span class="built_in">to_string</span>(num);</span><br><span class="line">    <span class="type">int</span> n = s.<span class="built_in">size</span>();</span><br><span class="line">    i64 ans = <span class="number">0</span>, D;</span><br><span class="line">    <span class="type">const</span> i64 NIL = <span class="number">-1</span>;</span><br><span class="line">    std::vector&lt;std::vector&lt;std::vector&lt;std::vector&lt;i64&gt;&gt;&gt;&gt; dp;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> i, <span class="type">int</span> sd, <span class="type">int</span> r, <span class="type">bool</span> is_limit) -&gt; i64</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (i == n)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> sd == D <span class="keyword">and</span> r == <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">auto</span> &amp;ndp = dp[i][sd][r][is_limit];</span><br><span class="line">        <span class="keyword">if</span> (ndp != NIL)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> ndp;</span><br><span class="line">        &#125;</span><br><span class="line">        i64 res = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> up = is_limit ? s[i] - <span class="string">&#x27;0&#x27;</span> : <span class="number">9</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> d = <span class="number">0</span>; d &lt;= up; d++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (sd + d &gt; D)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            res += <span class="built_in">self</span>(self, i + <span class="number">1</span>, sd + d, (<span class="number">10</span> * r + d) % D, is_limit <span class="keyword">and</span> d == up);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ndp = res;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (D = <span class="number">1</span>; D &lt;= <span class="number">14</span> * <span class="number">9</span>; D++)</span><br><span class="line">    &#123;</span><br><span class="line">        dp.<span class="built_in">assign</span>(n, std::<span class="built_in">vector</span>(D + <span class="number">1</span>, std::<span class="built_in">vector</span>(D, std::<span class="built_in">vector</span>(<span class="number">2</span>, NIL))));</span><br><span class="line">        ans += <span class="built_in">dfs</span>(dfs, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    i64 n;</span><br><span class="line">    std::cin &gt;&gt; n;</span><br><span class="line">    std::cout &lt;&lt; <span class="built_in">calc</span>(n) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="Problem-C-Codeforces"><a href="#Problem-C-Codeforces" class="headerlink" title="Problem - C - Codeforces"></a><a target="_blank" rel="noopener" href="https://codeforces.com/contest/1036/problem/C#:~:text=%E7%BF%BB%E8%AF%91-,C.%20Classy%20Numbers,-time%20limit%20per">Problem - C - Codeforces</a></h6><p>求出区间[L,R]中有多少个数满足：其数位中有至多3个非0数位</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="function">i64 <span class="title">calc</span><span class="params">(i64 num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::string s = std::<span class="built_in">to_string</span>(num);</span><br><span class="line">    <span class="type">int</span> n = s.<span class="built_in">size</span>();</span><br><span class="line">    <span class="type">const</span> i64 NIL = <span class="number">-1</span>;</span><br><span class="line">    <span class="function">std::vector <span class="title">dp</span><span class="params">(n, std::vector(n, std::vector(<span class="number">2</span>, std::vector(<span class="number">2</span>, NIL))))</span></span>;</span><br><span class="line">    <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> i, <span class="type">int</span> cnt, <span class="type">bool</span> is_limit, <span class="type">bool</span> is_num) -&gt; i64</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (i == n)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> is_num <span class="keyword">and</span> cnt &lt;= <span class="number">3</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">auto</span> &amp;ndp = dp[i][cnt][is_limit][is_num];</span><br><span class="line">        <span class="keyword">if</span> (ndp != NIL)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> ndp;</span><br><span class="line">        &#125;</span><br><span class="line">        i64 ans = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> up = is_limit ? s[i] - <span class="string">&#x27;0&#x27;</span> : <span class="number">9</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">not</span> is_num)</span><br><span class="line">        &#123;</span><br><span class="line">            ans = <span class="built_in">self</span>(self, i + <span class="number">1</span>, cnt, <span class="literal">false</span>, <span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> d = <span class="number">0</span>; d &lt;= up; d++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> ((<span class="keyword">not</span> is_num <span class="keyword">and</span> d != <span class="number">0</span>) <span class="keyword">or</span> is_num)</span><br><span class="line">            &#123;</span><br><span class="line">                ans += <span class="built_in">self</span>(self, i + <span class="number">1</span>, cnt + (d != <span class="number">0</span>), is_limit <span class="keyword">and</span> d == up, <span class="literal">true</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ndp = ans;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dfs</span>(dfs, <span class="number">0</span>, <span class="number">0</span>, <span class="literal">true</span>, <span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    i64 L, R;</span><br><span class="line">    std::cin &gt;&gt; L &gt;&gt; R;</span><br><span class="line">    std::cout &lt;&lt; <span class="built_in">calc</span>(R) - <span class="built_in">calc</span>(L - <span class="number">1</span>) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="No-741-AscNumber-Easy"><a href="#No-741-AscNumber-Easy" class="headerlink" title="No.741 AscNumber(Easy)"></a><a target="_blank" rel="noopener" href="https://yukicoder.me/problems/no/741">No.741 AscNumber(Easy)</a></h6><p>求出[1,<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">10^{n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6644em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span>]有多少个数字满足：其数位不递减<br>对<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup><mo>+</mo><mn>7</mn></mrow><annotation encoding="application/x-tex">10^{9}+7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">7</span></span></span></span>取模</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> Z = Mint&lt;i64&gt;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    std::cin &gt;&gt; n;</span><br><span class="line">    std::string s = <span class="string">&quot;1&quot;</span> + std::<span class="built_in">string</span>(n, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">    n = n + <span class="number">1</span>;</span><br><span class="line">    <span class="type">const</span> i64 NIL = <span class="number">-1</span>;</span><br><span class="line">    <span class="function">std::vector <span class="title">dp</span><span class="params">(n, std::vector(<span class="number">10</span>, NIL))</span></span>;</span><br><span class="line">    <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> i, <span class="type">int</span> cur, <span class="type">bool</span> is_limit, <span class="type">bool</span> is_asc) -&gt; Z</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (i == n)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> is_asc;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">auto</span> &amp;ndp = dp[i][cur];</span><br><span class="line">        <span class="keyword">if</span> (ndp != NIL)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> ndp;</span><br><span class="line">        &#125;</span><br><span class="line">        Z ans = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> up = is_limit ? s[i] - <span class="string">&#x27;0&#x27;</span> : <span class="number">9</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> d = <span class="number">0</span>; d &lt;= up; d++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (d &gt;= cur)</span><br><span class="line">            &#123;</span><br><span class="line">                ans += <span class="built_in">self</span>(self, i + <span class="number">1</span>, d, is_limit <span class="keyword">and</span> d == up, <span class="literal">true</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ndp = ans.v;</span><br><span class="line">    &#125;;</span><br><span class="line">    std::cout &lt;&lt; <span class="built_in">dfs</span>(dfs, <span class="number">0</span>, <span class="number">0</span>, <span class="literal">true</span>, <span class="literal">true</span>) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="D-Beautiful-numbers"><a href="#D-Beautiful-numbers" class="headerlink" title="D. Beautiful numbers"></a><a target="_blank" rel="noopener" href="https://codeforces.com/problemset/problem/55/D">D. Beautiful numbers</a></h6><p>给定范围[L,R],<br>当且仅当正整数可以被其非零位数整除时，它才是美丽的.计算给定范围内美丽数字的数量。</p>
<p><strong>多组重复贡献时，贴上限,is_limit==true的位不进行记忆化</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/extc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">20</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> M = <span class="number">2520</span>;</span><br><span class="line"><span class="type">const</span> i64 NIL = <span class="number">-1</span>;</span><br><span class="line"><span class="type">int</span> id[M + <span class="number">1</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>, j = <span class="number">1</span>; i &lt;= M; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (M % i == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            id[i] = j++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">std::vector&lt;std::vector&lt;std::vector&lt;std::vector&lt;i64&gt;&gt;&gt;&gt; dp;</span><br><span class="line"><span class="function">i64 <span class="title">calc</span><span class="params">(i64 num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::string s = std::<span class="built_in">to_string</span>(num);</span><br><span class="line">    std::<span class="built_in">reverse</span>(s.<span class="built_in">begin</span>(), s.<span class="built_in">end</span>());</span><br><span class="line">    <span class="type">int</span> n = s.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> i, <span class="type">int</span> cur, <span class="type">int</span> r, <span class="type">bool</span> is_limit) -&gt; i64</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (i == <span class="number">-1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> r % cur == <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">auto</span> &amp;ndp = dp[i][id[cur]][r][is_limit];</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">not</span> is_limit <span class="keyword">and</span> ndp != NIL)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> ndp;</span><br><span class="line">        &#125;</span><br><span class="line">        i64 res = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> up = is_limit ? s[i] - <span class="string">&#x27;0&#x27;</span> : <span class="number">9</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> d = <span class="number">0</span>; d &lt;= up; d++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> ncur = d ? cur / std::<span class="built_in">gcd</span>(cur, d) * d : cur;</span><br><span class="line">            <span class="type">int</span> nr = (r * <span class="number">10</span> + d) % M;</span><br><span class="line">            res += <span class="built_in">self</span>(self, i - <span class="number">1</span>, ncur, nr, is_limit <span class="keyword">and</span> d == up);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">not</span> is_limit)</span><br><span class="line">        &#123;</span><br><span class="line">            ndp = res;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dfs</span>(dfs, n - <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    i64 L, R;</span><br><span class="line">    std::cin &gt;&gt; L &gt;&gt; R;</span><br><span class="line">    std::cout &lt;&lt; <span class="built_in">calc</span>(R) - <span class="built_in">calc</span>(L - <span class="number">1</span>) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    <span class="comment">// std::cout &lt;&lt; calc(R) &lt;&lt; &#x27; &#x27; &lt;&lt; calc(L - 1) &lt;&lt; &#x27;\n&#x27;;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>)-&gt;<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">init</span>();</span><br><span class="line">    dp = std::<span class="built_in">vector</span>(N, std::<span class="built_in">vector</span>(<span class="number">60</span>, std::<span class="built_in">vector</span>(M, std::<span class="built_in">vector</span>(<span class="number">2</span>, NIL))));</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    std::cin &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span> (t--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/04/28/%E6%95%B0%E4%BD%8Ddp/" data-id="clvjoc5ve00060lop4761aw2h" data-title="数位dp" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2024/04/28/dp_probability/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">前一篇</strong>
      <div class="article-nav-title">
        
          dp for probability
        
      </div>
    </a>
  
  
    <a href="/2024/04/25/abc015/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">后一篇</strong>
      <div class="article-nav-title">abc015</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/05/">五月 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/04/">四月 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/05/21/abc284/">(no title)</a>
          </li>
        
          <li>
            <a href="/2024/04/28/SlopeTrick/">slope trick</a>
          </li>
        
          <li>
            <a href="/2024/04/28/Z_Function/">Z_Functon</a>
          </li>
        
          <li>
            <a href="/2024/04/28/bit_dp/">bit dp</a>
          </li>
        
          <li>
            <a href="/2024/04/28/dp_on_digits/">dp on digits</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 ginatia<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>